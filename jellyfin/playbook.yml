---
- name: Start Nextcloud in docker
  hosts: all
  gather_facts: no

  vars_files:
    - ../common.yml
  vars:
    docker_compose_location: "{{remote_project_location}}/nextcloud"
    remote_storage_location: "{{remote_storage_location}}/nextcloud"

  tasks:
    - name: Create data folders
      file:
        path: "{{remote_storage_location}}/{{item}}"
        state: directory
      with_items:
        - "app"
        - "data"
        - "db"

    - name: Start Nextcloud
      docker_compose:
        pull: yes
        project_src: "{{docker_compose_location}}"
